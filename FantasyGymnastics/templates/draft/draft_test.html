<html>
    <head>

    </head>
    <body>
        {{league_pk|json_script:"league_pk"}}
        <script>
            const leaguePk = JSON.parse(document.getElementById('league_pk').textContent)

            console.log("Connecting to draft WebSocket for league pk " + leaguePk)
            const draftSocket = new WebSocket(
                'ws://' + window.location.host + '/ws/draft/' + leaguePk + '/'
            );

            draftSocket.onmessage = function(e) {
                const data = JSON.parse(e.data);
                console.log("message received back", data);
            }

            draftSocket.onopen = function(e) {
                console.log("Connected");
            }

            function send() {
                message = document.getElementById("testInput").value;
                console.log(message)
                draftSocket.send(JSON.stringify({'gymnast_pk': message}))
            }

        </script>
        This is the draft for league #{{league_pk}}
        <input type="text" id="testInput">
        <button onclick="send()">Send</button>
    </body>
</html>